{
    "lists": {
        "name": "tds",
        "desc": "Input metadata for tests",
        "data": {
            "trackers": {
                "third-party.site": {
                    "owner": {
                        "name": "Test Site for Tracker Blocking",
                        "displayName": "Bad Third Party Site",
                        "privacyPolicy": "",
                        "url": "http://third-party.site"
                    },
                    "prevalence": 0.1,
                    "fingerprinting": 3,
                    "cookies": 0.1,
                    "categories": [],
                    "default": "block"
                },
                "bad.third-party.site": {
                    "owner": {
                        "name": "Test Site for Tracker Blocking",
                        "displayName": "Bad Third Party Site",
                        "privacyPolicy": "",
                        "url": "http://bad.third-party.site"
                    },
                    "prevalence": 0.1,
                    "fingerprinting": 3,
                    "cookies": 0.1,
                    "categories": [],
                    "default": "block",
                    "rules": [
                        {
                            "rule": "bad\\.third-party\\.site\\/ignore",
                            "action": "ignore"
                        },
                        {
                            "rule": "bad\\.third-party\\.site",
                            "exceptions": {
                                "domains": [
                                    "ignore.test"
                                ],
                                "types": [
                                    "script"
                                ]
                            }
                        }
                    ]
                },
                "tracker.test": {
                    "owner": {
                        "name": "Test Site for Tracker Blocking",
                        "displayName": "Bad Third Party Site",
                        "privacyPolicy": "",
                        "url": "http://tracker.test"
                    },
                    "prevalence": 0.1,
                    "fingerprinting": 3,
                    "cookies": 0.1,
                    "categories": [],
                    "default": "block"
                },
                "broken.third-party.site": {
                    "owner": {
                        "name": "Test Site for Tracker Blocking",
                        "displayName": "Broken Third Party Site",
                        "privacyPolicy": "",
                        "url": "http://broken.third-party.site"
                    },
                    "prevalence": 0.1,
                    "fingerprinting": 3,
                    "cookies": 0.1,
                    "categories": [],
                    "rules": [],
                    "default": "ignore"
                },
                "ignore.test": {
                    "owner": {
                        "name": "Test Site for Tracker Blocking",
                        "displayName": "ignore Site",
                        "privacyPolicy": "",
                        "url": "http://ignore.test"
                    },
                    "prevalence": 0.1,
                    "fingerprinting": 3,
                    "cookies": 0.1,
                    "categories": [],
                    "default": "ignore",
                    "rules": [
                        {
                            "rule": "ignore\\.test\\/tracker",
                            "action": "block"
                        }
                    ]
                }
            },
            "entities" : {
                "Test Site for Tracker Blocking": {
                    "domains": [
                        "bad.third-party.site",
                        "broken.third-party.site",
                        "third-party.site",
                        "tracker.test"
                    ],
                    "prevalence": 0.1,
                    "displayName": "Test Site for Tracker Blocking"
                },
                "ignore Site for Tracker Blocking": {
                    "domains": [
                        "ignore.test",
                        "sub.ignore.test"
                    ],
                    "prevalence": 0.1,
                    "displayName": "ignore Site for Tracker Blocking"
                }
            },
            "cnames": {}
        }
    },
    "tests": {
        "domainTests": {
            "name": "URL-matching",
            "desc": "interactions between URLs from ignore and tracker lists",
            "tests": [
                {
                    "name": "same party tracker",
                    "base": "https://bad.third-party.site/",
                    "rel": "https://bad.third-party.site/",
                    "expect_action": "ignore"
                },
                {
                    "name": "same party ignore",
                    "base": "https://ignore.test/",
                    "rel": "https://ignore.test/",
                    "expect_action": "ignore"
                },
                {
                    "name": "tracker loads ignore",
                    "base": "https://bad.third-party.site/",
                    "rel": "https://ignore.test/",
                    "expect_action": "ignore"
                },
                {
                    "name": "ignore loads tracker",
                    "base": "https://ignore.test/",
                    "rel": "https://bad.third-party.site/",
                    "expect_action": "ignore"
                },
                {
                    "name": "notignore blocks tracker",
                    "base": "https://randomsite123.com/",
                    "rel": "https://bad.third-party.site/",
                    "expect_action": "block"
                },
                {
                    "name": "sub.ignore loads tracker",
                    "base": "https://sub.ignore.test/",
                    "rel": "https://bad.third-party.site/",
                    "expect_action": "ignore"
                },
                {
                    "name": "tracker loads ignore",
                    "base": "https://bad.third-party.site/",
                    "rel": "https://ignore.test/",
                    "expect_action": "ignore"
                },
                {
                    "name": "tracker loads random",
                    "base": "https://bad.third-party.site/",
                    "rel": "https://random.test/",
                    "expect_action": "ignore"
                },
                {
                    "name": "random does not load tracker",
                    "base": "https://random.test/",
                    "rel": "https://bad.third-party.site/",
                    "expect_action": "block"
                },
                {
                    "name": "random loads itself",
                    "base": "https://random.test/",
                    "rel": "https://random.test/",
                    "expect_action": "ignore"
                },
                {
                    "name": "random loads ignore path on tracker",
                    "base": "https://random.test/",
                    "rel": "https://bad.third-party.site/ignore",
                    "expect_action": "ignore"
                },
                {
                    "name": "random loads broken.tracker",
                    "base": "https://random.test/",
                    "rel": "https://broken.third-party.site/",
                    "expect_action": "ignore"
                },
                {
                    "name": "random loads randomsub.tracker??",
                    "base": "https://random.test/",
                    "rel": "https://randomsub.third-party.site/",
                    "expect_action": "block"
                },
                {
                    "name": "tracker loads permitted for same entity",
                    "base": "https://third-party.site/",
                    "rel": "https://tracker.test/",
                    "expect_action": "ignore"
                },      
                {
                    "name": "block tracker path in ignore domain",
                    "base": "https://random.test/",
                    "rel": "https://ignore.test/tracker?abc=2",
                    "expect_action": "block"
                }
            ]
        }
    }
}